<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Create Slides</title>

    <link class="jsbin" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css"
          rel="stylesheet" type="text/css"/>
    <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.min.js"></script>

    <script type="text/javascript"
            src="http://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min.js"></script>
    <script type="text/javascript" charset="utf-8">

        $(document).ready(function () {

            ///////////////////////////socket initialization
            try {
<<<<<<< HEAD
                alert("yess1");
                var socket = io.connect('http://localhost:8000/presentation');

                alert("yess2");
=======
                console.log("yess1");
                var socket = io.connect('http://localhost:8000/presentation');

                console.log("yess2");
>>>>>>> 84faf81a0649acc56ab63f8d150c2048e72a392e
            }
            catch (err) {
                console.log(err);
            }
            ///////////////////////////socket initialization


            ///////////////////////////socket event listeners

<<<<<<< HEAD
=======
            //this event is not actually for this page
            //it should be moved to audience presentation page
            socket.on('page changed', function (msg) {
                alert(msg.page);
            });

            //this event is not actually for this page
            //it should be moved to audience presentation page
            socket.on('session ended', function () {
                alert("session ended for audience");
            });

>>>>>>> 84faf81a0649acc56ab63f8d150c2048e72a392e

            socket.on('my response', function (msg) {
                console.log('yesssss');

                //change this to append bellow msg somewhere in the view , it's for testing :
                //  'Received #' + msg.data
                $('#log').append('<br>' + $('<div/>').text('Received #' + msg.data).html());
            });

            socket.on('connect', function (msg) {
                console.log('connected');
                socket.emit('my event', {data: 'I\'m connected!'});
            });

            ///////////////////////////socket event listeners


            $('#prv').click(function (event) {
                prvFunc();
<<<<<<< HEAD
                
                //roomName should be stored somewhere in this file and then
                //be replaced in below line
                socket.emit('change page', {page: current, room_name: "roomName"});
=======
                socket.emit('change page', {page: current});
>>>>>>> 84faf81a0649acc56ab63f8d150c2048e72a392e
                return false;
            });

            $('#nxt').click(function (event) {
                nxtFunc();
<<<<<<< HEAD

                //roomName should be stored somewhere in this file and then
                //be replaced in below line
                socket.emit('change page', {page: current, room_name: "roomName"});
=======
                socket.emit('change page', {page: current});
>>>>>>> 84faf81a0649acc56ab63f8d150c2048e72a392e
                return false;
            });

            $('#end-session').click(function (event) {

                endSession();

                socket.emit('end session', function (msg) {
                    if (msg == 1) {
                        // do what is needed in view when the session in ended
                        alert("session finished properly");
                    } else if (msg == 0) {
                        alert("session not finished properly");
                    }
                });
                return false;
            });

        });

    </script>

</head>
<body>

<script>

    var current = 0;
    var slidesNum = 5;

    function nxtFunc() {
        current++;
        //frestadane current ba socket
        document.getElementById("prv").disabled = false;
        if (current == slidesNum - 1) document.getElementById("nxt").disabled = true;
    }

    function prvFunc() {
        current--;
        //frestadane current ba socket
        document.getElementById("nxt").disabled = false;
        if (current == 0) document.getElementById("prv").disabled = true;
    }

    function endSession() {


    }


</script>

<button id="prv" disabled=true>previous</button>
<button id="nxt">next</button>
<br>
<br>
<button id="end-session">end session</button>

</body>
</html>
