<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Create Slides</title>

    <link class="jsbin" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css"
          rel="stylesheet" type="text/css"/>
    <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.min.js"></script>

    <script type="text/javascript"
            src="http://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min.js"></script>
    <script type="text/javascript" charset="utf-8">

        $(document).ready(function () {

            ///////////////////////////socket initialization
            try {
                console.log("yess1");
                var socket = io.connect('http://localhost:8000/presentation');

                console.log("yess2");
            }
            catch (err) {
                console.log(err);
            }
            ///////////////////////////socket initialization


            ///////////////////////////socket event listeners

            //this event is not actually for this page
            //it should be moved to audience presentation page
            socket.on('page changed', function (msg) {
                alert(msg.page);
            });

            socket.on('my response', function (msg) {
                console.log('yesssss');

                //change this to append bellow msg somewhere in the view , it's for testing :
                //  'Received #' + msg.data
                $('#log').append('<br>' + $('<div/>').text('Received #' + msg.data).html());
            });

            socket.on('connect', function (msg) {
                console.log('connected');
                socket.emit('my event', {data: 'I\'m connected!'});
            });

            ///////////////////////////socket event listeners


            $('#prv').click(function (event) {
                prvFunc();
                socket.emit('change page', {page: current});
                return false;
            });

            $('#nxt').click(function (event) {
                nxtFunc();
                socket.emit('change page', {page: current});
                return false;
            });

        });

    </script>

</head>
<body>

<script>

    var current = 0;
    var slidesNum = 5;

    function nxtFunc() {
        current++;
        //frestadane current ba socket
        document.getElementById("prv").disabled = false;
        if (current == slidesNum - 1) document.getElementById("nxt").disabled = true;
    }

    function prvFunc() {
        current--;
        //frestadane current ba socket
        document.getElementById("nxt").disabled = false;
        if (current == 0) document.getElementById("prv").disabled = true;
    }

</script>

<button id="prv" disabled=true>previous</button>
<button id="nxt">next</button>


</body>
</html>
