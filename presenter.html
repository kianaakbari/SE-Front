<!doctype html>
<html>
<head>
	<title>presenter</title>
	<meta charset = "utf-8"/>
	<link rel="stylesheet" href="css/presenter_style.css">
	<link rel="stylesheet" type="text/css" href="css/lib/bootstrap.min.css">
	<!--<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>-->
	<script src="js/lib/angular.min.js"></script>
</head>

<body class = "slide-blue">

<script>
	function getURLParameter(name) {
 	 return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null;
	}
//	var presentationID = getURLParameter('presentationID');
	var presentationID =1 ;
    function getCookie(cname) {
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for(var i = 0; i <ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
                return c.substring(name.length,c.length);
            }
        }
        return "";
    }

    var auth = getCookie('auth');
    var app = angular.module("app", []);
    app.controller("HttpGetController", function ($scope, $http) {

        $scope.SendData = function a() {
            var username = auth;
            var password = '';


            function make_base_auth(user, password) {
                var tok = user + ':' + password;
                var hash = btoa(tok);
                return "Basic " + hash;
            };

            var data = ({
                pid: presentationID
            });

            $http({
                method: 'POST', url: 'http://127.0.0.1:8000/api/v1/create_session',data: JSON.stringify(data), headers: {
                    'Authorization': make_base_auth(username,password),
                    'Content-Type': 'application/json'
                }
            })
                    .success(function (data, status, headers, config) {
                        $scope.PostDataResponse = data.session_code;
                    })
                    .error(function (data, status, header, config) {
                        $scope.PostDataResponse = data;
                    });
        };


    });
</script>

	<div class = "container">
	
		<div class = "slide-layout">
			
			<div class = "lo-alpha">
				<div class = "row">
					<div class = "col-xs-3 col-md-3 lo-alpha_tips">
						<p class = "para">Tell your students to open their web browser, visit peardeck.com/join, and enter this code</p>

					</div>
					<div class = "col-xs-9 col-md-7 lo-alpha_join">
						<div class = "alpha-step">
							<p class = "alpha-pa">peardeck.com/join</p>
						</div>

						<div class = "alpha-step" ng-app="app" ng-controller="HttpGetController" ng-init="SendData()">
							<p class = "alpha-pa1">{{PostDataResponse}}</p>
						</div>

					</div>
				</div>
			</div>
			
			
		</div>






	</div>

	<ui class = "pnav">
		<div class = "container-fluid">
			<div class = "row">
				<li class = "col-xs-1 col-md-1 pnav_control">
					<button class = "col-md-1 pnav-btn"></button>
				</li>
				<li class = "col-xs-1 col-md-1 pnav_control">
					<button class = "col-md-1 pnav-btn"></button>
				</li>
				<li class = "col-xs-1 col-md-1 pnav_control">
					<button class = "col-md-1 pnav-btn"></button></li>

				<li class = "col-xs-5 col-md-4 pnav_control responser">
					<p class="connect">No student have joined</p>
				</li>
				
				<!--second page-->

				<li class = "col-xs-1 col-md-1 pnav_control invisible">
					<button class = "col-md-1 pnav-btn"></button>
				</li>
				<li class = "col-xs-1 col-md-1 pnav_control invisible">
					<button class = "col-md-1 pnav-btn"></button>
				</li>
				<li class = "col-xs-1 col-md-1 pnav_control invisible">
					<button class = "col-md-1 pnav-btn"></button>
				</li>
				<li class = "col-xs-1 col-md-1 pnav_control invisible">
					<button class = "col-md-1 pnav-btn"></button>
				</li>

				<!--second page-->

				<li class = "col-xs-1 col-md-1 pnav_control">
					<button class = "col-md-1 pnav-btn"></button>
				</li>

				
			</div>
		</div>
	</ui>


</body>

</html>